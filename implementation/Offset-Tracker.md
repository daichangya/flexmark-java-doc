
偏移跟踪执行跨文本跟踪插入符位置的功能
转换操作以及文本编辑期间。

因此,需要一些准备步骤来帮助跟踪器恢复插入符号
准确定位,尤其是在
编辑操作导致插入符号被空格或格式控件包围
字符,例如LineSeparator(`LS`)。

空格包围的尖号是有问题的,因为大多数转换都无法保留
空格,可能会导致插入符号处的文本被删除。此外,输入
空格将导致它们在文本换行后被折叠,从而无法插入
空格后跟一个单词后面的非空格文本。在广告素材的后面留一个空间比较自然
即使在插入符号出现后有一个空间允许自然插入,插入符号仍保留
输入结果。

要做到这一点,需要对文本进行预处理,并将单词后的第一个空格更改为
`&nbsp;`在应用文字换行以防止其在下一个空格处折叠之前
并在包装后将插入号保持在`&nbsp;`字符处。

表插入符在插入符中时,除插入符之前的所有空格外,表格式化同样适用
表单元格和单元格的尾随空白区域应更改为`&nbsp;`
格式化表格之前已插入空格。这样的效果是不会折叠任何类型的
预期将键入非空格的空格。另一方面,如果插入符号位于
单元格文本之前的空白区域,则无需执行任何操作。

同样,如果通过退格操作删除了文本,则插入符应保持在同一位置
相对于上一个单词末尾的相对位置,因此它似乎不会在
编辑后自动换行的文本。如果在退格后插入符号在之后是一个或多个空格
的前一个单词,那么在换行后,它应该在单词末尾之后留一个空格,即使
通过将以下文本换行到下一个空格来折叠或删除其他空格
线。也可以通过将前一个单词之后的空格更改为`&nbsp;`之前的空格来实现
包装以使其能够承受包装操作,然后将其更改回一个空间
包装。

在退格后准备用于格式化的表文本与进行空格插入相同。
只有相对于单元格文本和单元格对齐的插入号位置才能确定所需的位置
在应用表格格式之前修改文本。

行分隔符(`LS`)代表一种特殊情况,因为它总是在下一个开始处
换行后的行。在`LS`字符之前插入的文本将换行为
上一行。

如果插入符号紧接在`LS`字符之前或仅由空格隔开,则
键入将导致文本显示在前一行的末尾,而不是插入符号
位置。因此,理想的是插入符号应保持插入符号的位置,甚至
如果将其与空格隔开,则在下一行将其与`LS`字符保持一致。